---
title: "Lab Notebook: July 2018"
output: html_notebook
---
#Goals: July 23 - 27
1. XML parse: 
    + Scale up to AEM XML files on flux
    + Genderize scale up & merge
    
2. Authorship paper - research & outline for chalk talk:
    + Intro
    + Materials & Methods
    + Results
    + Discussion

3. Monthly journals report:
    + Give Joel list of missing data

4. ASM blog post
    + write Microbial Myths video description

#2018/07/23

**- Review BA heme paper**

**- XML scale up**

Well, shit. It seems that my method of pulling an entire df using `xmlSApply(input_xmltop[[2]], function(x) xmlSApply(x, xmlValue))` doesn't work b/c the way the files are listed aren't always consistent. Looks like I'm going to have manually use the `get_column` function for every desired data input.

Got manu_parse to work on 500 XML scale up. Running into problems with people_parse now. Can't consistently find "people" in the same location in all XML files. The `get_column` function works, except with multiple address entries, probably the easiest route to fix? `head(n=1)`

**- ASM blog post**

Finish draft & send to Julie along with selected images. 

Start video descriptive for Ray.

Edit Monika's blog post on plastic digesting microbes.

#Goals: July 16 - 20
1. XML parse: 
    + Scale up to AEM XML files on flux
    + ~~check out script automating genderize.io~~
    
2. Authorship paper - research & outline:
    + Intro
    + Materials & Methods

3. Monthly journals report:
    + ~~Check in with Joel again~~
    + ~~Outline graphs/plots~~
    + ~~Call Joel @ 301-254-5900 on Wed @ 1pm~~

4. ASM blog post
    + ~~finalize draft of Microbial Myths~~
    + ~~submit to Julie~~
    + write video description

#2018/07/19

**- Lab meeting**

**- Read Will's paper**

**- Scale up XML parse**

Troubleshooting tips from Nick. Save alias in `.bashrc` files

AEM XML files are only 1.4G in total, going to download all of them to a local directory to make it easier to work with.   + Linux command: `scp -r akhagan@flux-xfer.arc-ts.umich.edu:/nfs/turbo/schloss-lab/akhagan/ASM_XML_parsing/gender_data/data/AEM ~/Desktop`

**- Authorship paper**

Finsished importing zotero citations/pdfs. Can export citations using the bibtex format.

#2018/07/18

**- Call with Joel about eJP access**

System has 120 reports, don't want to reinvent the wheel. Melissa has the option to set up a batch job. 

Interested in seeing what kind of reports we design. 

eJP primarily in Perl code. Hire interns to teach coding.

Possible to get weekly access to XML. FTP server login & password, or FTP account that eJP would transfer file to. Make sure to use SFTP so that it can be encrypted during data transfer. Data privacy is becoming an issue - requires agreement. Lots at stake for data breach (names, addresses, IP addresses) Need to look into security stuff for computers (GDPR read up).

Linux command line (get a book) - type FTP prompt with web address to access files (eventually type bash shell script to automate). 

The file at rest should also be encrypted. Linux should have encrypt/decrypt commands. Suggests G (will email). Unencrypt for R script, then reencrypt & preferably delete. 

Gender study - AGU study Brooks/Hanson mathematical analysis, to do the study correctly, you need to know the peoples age b/c of bias in older vs younger. Controlling for age was important in checking for bias. Cross-ref against membership group for age data. Could get that from ASM, but there isn't a "universal" unique identifier. Might use last name & email. 

Self-report gender/race/ethincity isn't currently collected. Check membership system. 

Action items:
    + Need to know what fields need to be added to the XML files: full editor names (full all names if cross-ref to membership data), reviewer score, usage stats (web views, pdf views/downloads, unique users), identify transfers and origin, 
    
    + Need to talk about security/encryption of the XML files & access - study up on GDPR
    
    + Check out AGU study (worked with eJP to access data?)
    
    + Linux book
    
Follow up question for Joel:
    + What XML files will be included in FTP batch? All of them? From a given timespan? Those with recent modifications?

**- Microbial Myths**

Watched video & made suggestions. 

Revised draft of blog post & found images.

**- Authorship paper**

Transferred papers for Zotero from my personal computer.

#2018/07/17

**- Authorship Paper**

Started Rmd file, imported Zotero bibliography, started `.bib` and `.csl` files.

**- Flux scale up**

Having trouble with the `parse_manu` function in the scale up. So I decided to write a function that randomly samples and parses XML files then returns a success/error message along with the file name so I can trouble shoot. So far it isn't working... However, it won't actually handle the errors, and the `case_when` returns a random number of identical results. 

#2018/07/16

**- Journals report**

Emailed Joel about eJP access again. Emailed Adar to ask about a login to the eJP site.

Draft outline of reports. 

Joel said to call whenever works. 

**- Genderize.io script**

Finished script, fixed conversion from html special characters to text. Will still have to revisit to: 
  
  1. Double check that all entered names are being queried
  2. Figure out why I'm getting `400` errors

#Goals: July 9 -13
1. EiC stats
    + Editor data for JCM & AEM - scale up to all journals?
    + Top competitors for all journals

1. XML parse: 
    + Scale up to AEM XML files on flux
    + finish script to automate genderize.io
    + ~~test Pat's API key - 438d7ff7f5df44619feace2a7bd07503~~
  
1. Estimated IF
    + ~~Emailed Tyler about WoS API - waiting for Clarviate response~~
    + Get AMR API key from Pat
    + Find/write AMR API request script
    + Test API script on 5 doi's
    
1. Monthly journals report - got parameters from Melissa
    + Identify graphs/plots
    + Identify data needed
    + Check in with Joel again

1. ASM blog post
    + finish first draft of Microbial Myths
    + submit to Julie
    
1. Summer Strategic Goals
    + ~~Finish planning goals~~
    + ~~Meet with Pat~~
    
#2018/07/12

**- Journal Club paper**

**- Lab meeting**

**- ASM blog post**

#2018/07/11

**- estimated JIF**

Work on finding WoS API script for R. Can only find `wosr` which interfaces with InCite & WoS Web Services lite. Can't find one for the AMR api yet. Might have to build this interface from scratch. 

**- ASM blog post**

**- Summer strategic goals**

Sick, email goals to Pat. 

#2018/07/10

**- work on genderize.io script**

Automated it to skip errors & repeat N/A names without a country code. 

Need to find a way to deal with the special characters again.

**- Work on summer strategic goals**

**- ASM blog post**

Work on Microbial Myths post.

#2018/07/09

**- ASM blog post**

Worked on research about bathing infants and the microbiome.

**- Set up new laptop**

Installed gitcola, R, R studio, slack, etc. Cloned github repositories. Also installed a couple of productivity tools: a notepad & task/timer app

**- emailed with Tyler about WoS API**

He sent links to documentation about the APIs & is going to check on which one we subscribe to. I think Pat was using the AMR, I asked him for the API key.